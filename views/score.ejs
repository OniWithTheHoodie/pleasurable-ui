<%- include('./partials/head') %>
<%- include('./partials/navigation') %>


<section class="houseInfo">
    <h1>score pagina</h1>
    <p class="houseInfo">hier kunt u een score geven over het huis en een eigen score toevoegen en de score van uw teamleden zien
        ga naar <a href="#users">score teamleden</a>
    </p>
    <hr class="orangeLine">
    <ul class="">
        <% if (house.poster_image) { %>
        <li>
            <picture>
                <source srcset="https://fdnd-agency.directus.app/assets/<%= house.poster_image.id %>?width=200&height=200&fit=cover&format=webp"
                        type="image/webp">
                <source srcset="https://fdnd-agency.directus.app/assets/<%= house.poster_image.id %>?width=200&height=200&fit=cover&format=avif"
                        type="image/avif"
                >
                <img src="https://fdnd-agency.directus.app/assets/<%= house.poster_image.id %>?width=200&height=200&fit=cover"
                     width="<%= house.poster_image.width %>"
                     height="<%= house.poster_image.height %>"
                     class="house_details_img__image"
                     alt="image-house">
                <% } %>
            </picture>
        </li>
        <li class=""><%= house.street %> <%= house.house_nr %> </li>
        <li class=""><%= house.city %> <%= house.postal_code %></li>
        <li class="">â‚¬<%= new Intl.NumberFormat("de-DE").format(house.price) %></li>


    </ul>
    <hr class="orangeLine">
</section>


<div class="formsRating ">


    <section class="formRatingItem">


        <h2>beoordeling</h2>
        <p>geef een beoordeling op bestaande of nieuwe beoordelingen</p>
        <form method="POST" action="/score/<%= house.id %>" class="scorefield">

            <!--                inputfields niet aanpassen vanwege de client side javascript-->


            <label for="algemeen" class="form_inputfields__label-inputfield"><span>algemeen:</span>
                <input class="input_numbers" type="number" id="algemeen" name="algemeenNumber" value=""
                       placeholder="0">
            </label>
            <label for="keuken" class="form_inputfields__label-inputfield"><span>keuken:</span>
                <input class="input_numbers" type="number" id="keuken" name="keukenNumber" value="" placeholder="0">
            </label>
            <label for="Badkamer" class="form_inputfields__label-inputfield"><span>Badkamer:</span>
                <input class="input_numbers" type="number" id="Badkamer" name="badkamerNumber" value=""
                       placeholder="0">
            </label>
            <label for="tuin" class="form_inputfields__label-inputfield"><span>tuin:</span>
                <input class="input_numbers" type="number" id="tuin" name="tuinNumber" value="" placeholder="0 ">
            </label>
            <label for="new" class="form_inputfields__label-inputfield"><span>nieuwe naam:</span>
                <input class="input_numbers" type="text" id="tuin" name="new" value="" placeholder=" ">
            </label>
            <label for="new_score"
                   class="form_inputfields__label-inputfield"><span>geeef een cijfer op:</span>
                <input class="input_numbers" type="number" id="tuin" name="new_score" value="" placeholder="0">
            </label>
            <button type="submit" class="savebutton">submit</button>
            <!--                <div class="loader hide_loader"></div>-->

        </form>




    </section>
    <section class="formRatingItem">
        <form method="POST" action="/score/<%= house.id %>" class="scorefield">


<!--         algemeen-->
            <fieldset class="fieldsetRating">
                <legend class="titleRating">algemeen</legend>
                    <input class="inputRating" id="algemeen1" name="algemeenNumber" type="radio" value="1">
                <label aria-label="1 " for="algemeen1" class="labelRating"></label>

                <input class="inputRating" id="algemeen2" name="algemeenNumber" type="radio" value="2">
                <label aria-label="2 sterren" for="algemeen2" class="labelRating"></label>


                <input class="inputRating" id="algemeen3" name="algemeenNumber" type="radio" value="3">
                <label aria-label="3 sterren" for="algemeen3" class="labelRating"></label>


                <input class="inputRating" id="algemeen4" name="algmeen" type="radio" value="4">
                <label aria-label="4 sterren" for="algemeen4" class="labelRating"></label>


                <input class="inputRating" id="algeemn5" name="algemeenNumber" type="radio" value="5 sterren">
                <label aria-label="5 sterren" for="algeemn5" class="labelRating"></label>
            </fieldset>

<!--            keuken-->
            <fieldset class="fieldsetRating">
                <legend class="titleRating">keuken</legend>
                    <input class="inputRating" id="keuken1" name="keukenNumber" type="radio" value="1">
                <label aria-label="1 " for="keuken1" class="labelRating"></label>


                <input class="inputRating" id="keuken2" name="keukenNumber" type="radio" value="2">
                <label aria-label="2 sterren" for="keuken2" class="labelRating"></label>


                <input class="inputRating" id="keuken3" name="keukenNumber" type="radio" value="3 ">
                <label aria-label="3 sterren" for="keuken3" class="labelRating"></label>


                <input class="inputRating" id="keuken4" name="keukenNumber" type="radio" value="4">
                <label aria-label="4 sterren" for="keuken4" class="labelRating"></label>


                <input class="inputRating" id="keuken5" name="keukenNumber" type="radio" value="5 sterren">
                <label aria-label="5 sterren" for="keuken5" class="labelRating"></label>
            </fieldset>
<!--            todo hier moet een interactie komen dat de button van kleur veranderd-->
            <button type="submit" class="savebutton">submit</button>
        </form>
        <p class="loading-state"></p>
        <p class="successtae"></p>
    </section>
    <div class=" formRatingItem">
        <!--             this ul must be here becuase it has other css than the ul of the partial-->
        <section class="formRatingItem">
            <h2>Ratings:</h2>
<!--            todo als je op submit drukt dan moet dit komen te staan de partial anders is het effect weg-->
            <ul>
                <%- include('partials/ShowScore', {result: house}); -%>
            </ul>

        </section>
        <ul class="showscore">
        </ul>

    </div>

    <section class=" formRatingItem">
        <h2 class="">Notities</h2>
        <p>Hier kunt u een notitie achterlaten.</p>

        <form method="POST" action="/score/<%= house.id %>" class="notesForm">
            <input type="hidden" value="<%= house.id %>">
            <label for="bericht" aria-label="laat uw noitite achter">
                <textarea id="note" name="note"></textarea>
            </label>
            <button type="submit" class="savebutton">Opslaan</button>

        </form>

    </section>



    <section class=" formRatingItem ">
        <h2>notitie</h2>
        <%- include('partials/showNotes', {result: house}); -%>

    </section>
    <section class="show_notes">

    </section>





</div>

<section class="sectionUsers" id="users">
    <hr class="orangeLine">
    <h2>users</h2>


</section>
<ul class="usersList">
    <% users.forEach(users => { %>

        <li class="usersScore">
            <% if (users.avatar) { %>
                <img src="https://fdnd-agency.directus.app/assets/<%= users.avatar.id %>?width=600&height=400&fit=cover"
                     alt="House Image" width="<%= users.width %>"
                     height="<%= users.height %>" class="users__avatars">

            <% } else { %>
                <p>er is geen user avatar</p>
            <% } %>
            <span class="username"><%= users.name %></span>
            <div class="score_div">

                <span class="score">score</span>
<!--                todo toevoegen score users-->
            </div>

        </li>

    <% }) %>

</ul>

<section class="sectionScore">
    <ul class="sectionScore">
        <% for (const obj of feedback) { %>
            <li>House ID: <%= obj.house %></li>
            <% if (obj.rating) { %>
                <li>Kitchen : <%= obj.rating.kitchen %></li>
                <li>general : <%= obj.rating.general %></li>
                <li>badkamer: <%= obj.rating.bathroom %></li>
                <li>tuin: <%= obj.rating.garden %></li>
            <% } else { %>
                <p>er is geens core ingevoerd</p>
            <% } %>
        <% } %>
    </ul>
</section>